# 🚀 YOLOv8 极速上手指南
> **目标**：从零开始，完成环境搭建、推理预测（含摄像头实时检测）到模型训练的全流程。

---

## 🛠️ 第一步：环境搭建 (Installation)

在开始之前，请确保您的电脑上已经安装了 **Python 3.8+** 和 **PyTorch**。

### 1. 安装 Ultralytics 库
这是 YOLOv8 的核心库，一行命令即可搞定：

```bash
pip install ultralytics
```

### 2. 验证安装
在终端输入以下命令，如果出现版本号，说明安装成功：

```bash
yolo version
```

---

## 🔮 第二步：初次体验 (Inference)

让我们用官方预训练模型来识别图片，或者直接**调用摄像头**进行实时检测。

### 方式 A：命令行 (CLI) - 最简单
直接在终端运行，YOLO 会自动下载 `yolov8n.pt` 模型。

**1. 预测单张图片：**
```bash
yolo predict model=yolov8n.pt source='https://ultralytics.com/images/bus.jpg'
```

**2. 调用摄像头实时检测：**
将 `source` 设置为 `0` 即可调用默认摄像头，并加上 `show=True` 实时展示画面。
```bash
yolo predict model=yolov8n.pt source='0' show=True
```

### 方式 B：Python 脚本 - 最灵活
适合集成到你自己的项目中。

**1. 预测图片代码：**
```python
from ultralytics import YOLO

# 加载模型
model = YOLO('yolov8n.pt')

# 对图片进行预测
results = model('https://ultralytics.com/images/bus.jpg')

# 展示/保存结果
for result in results:
    result.show()         # 弹窗显示结果
    result.save(filename='result.jpg') # 保存结果图片
```

**2. 调用摄像头代码：**
```python
from ultralytics import YOLO

# 加载模型
model = YOLO('yolov8n.pt')

# 开启摄像头实时预测
# source='0' 代表默认摄像头
# show=True 代表弹出窗口实时显示检测结果
model.predict(source='0', show=True)
```

---

## 📂 第三步：准备数据 (Data Preparation)

想要训练自己的模型（比如识别安全帽、火焰等），你需要准备数据。YOLO 要求特定的数据格式。

### 1. 文件夹结构
请严格保持以下目录结构，这能避免 90% 的报错：

```text
my_dataset/
├── data.yaml          # 数据集配置文件
├── train/             # 训练集
│   ├── images/        # 图片 (.jpg, .png)
│   └── labels/        # 标签 (.txt)
└── val/               # 验证集
    ├── images/
    └── labels/
```

### 2. 标签格式 (YOLO Format)
每个图片对应一个同名的 `.txt` 文件。文件内容每一行代表一个物体：
`class_id x_center y_center width height` (数值均为 0-1 的归一化坐标)。

### 3. data.yaml 配置文件
这是告诉 YOLO 数据在哪里的关键文件。新建 `data.yaml` 并写入：

```yaml
# data.yaml

# 训练集和验证集的路径 (可以是绝对路径，也可以是相对于当前目录的路径)
path: /path/to/my_dataset 
train: train/images
val: val/images

# 类别数量
nc: 2

# 类别名称 (必须与标签ID对应)
names:
  0: dog
  1: cat
```

---

## 🏋️‍♂️ 第四步：模型训练 (Training)

数据准备好后，就可以开始训练了。

### 启动训练 (Python)

```python
from ultralytics import YOLO

# 1. 加载模型
# 'yolov8n.yaml' 表示从头训练一个新模型
# 'yolov8n.pt' 表示在预训练模型基础上微调 (推荐，收敛更快)
model = YOLO('yolov8n.pt') 

# 2. 开始训练
model.train(
    data='my_dataset/data.yaml',  # 数据集配置文件路径
    epochs=100,                   # 训练轮数
    imgsz=640,                    # 图片大小
    batch=16,                     # 批次大小
    device=0                      # 使用 GPU 0 (如果没有 GPU 则填 'cpu')
)
```

### 训练产物
训练完成后，查看 `runs/detect/train/` 目录：
*   **weights/best.pt**: 效果最好的模型权重（以后就用这个！）
*   **results.png**: 训练过程的损失函数曲线图。

---

## 📦 第五步：模型导出 (Export)

如果你想把模型部署到 C++、手机端或网页端，通常需要导出为 ONNX 格式。

```python
from ultralytics import YOLO

# 加载你训练好的模型
model = YOLO('runs/detect/train/weights/best.pt')

# 导出为 ONNX 格式
model.export(format='onnx')
```

---

## 💡 常用参数速查表

| 参数 | 说明 | 推荐值 |
| :--- | :--- | :--- |
| **model** | 模型文件 | `yolov8n.pt` (速度快), `yolov8x.pt` (精度高) |
| **epochs** | 训练轮次 | `100` ~ `300` |
| **imgsz** | 输入图片尺寸 | `640` (标准), `1280` (小目标检测) |
| **conf** | 置信度阈值 | `0.25` (预测时使用，低于此分数的框会被过滤) |
| **device** | 运行设备 | `0` (GPU), `cpu`, `mps` (Mac M1/M2) |

---

### 🌟 小贴士
*   **标注工具**：推荐使用 **LabelImg** 或 **Roboflow** (在线) 来制作数据集。
*   **显存不足**：如果报错 OOM (Out of Memory)，请减小 `batch` 的大小（如改为 8 或 4）。
*   **模型选择**：YOLOv8 有 n, s, m, l, x 五个版本。**n** 最快最小，**x** 最慢最准。初学者建议从 **n** 开始。

祝你的 YOLO 之旅愉快！如有报错，请检查路径是否包含中文（尽量避免）。
